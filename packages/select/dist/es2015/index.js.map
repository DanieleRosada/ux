{"version":3,"file":"index.js","sources":["../../src/util.ts","../../src/ux-select.ts","../../src/ux-optgroup.ts","../../src/ux-option.ts","../../src/ux-select-theme.ts","../../src/index.ts"],"sourcesContent":["export function getAuViewModel<T = any>(el: any): T {\n  return el.au.controller.viewModel;\n}\n\nexport function bool(v: boolean | string) {\n  return !!(v || v === '');\n}\n","import {\n  customElement,\n  bindable,\n  computedFrom,\n  ViewResources,\n  ViewCompiler,\n  DOM,\n  processContent,\n  ElementEvents,\n  inject,\n  PLATFORM,\n  InternalCollectionObserver,\n  ObserverLocator,\n  TaskQueue,\n  inlineView,\n} from 'aurelia-framework';\n\nimport { getLogger } from 'aurelia-logging';\nimport { StyleEngine, UxComponent } from '@aurelia-ux/core';\n\nimport { UxSelectTheme } from './ux-select-theme';\nimport { UxOptGroupElement } from './ux-optgroup';\nimport { UxOptionElement } from './ux-option';\nimport { getAuViewModel, bool } from './util';\nimport * as UX_SELECT_VIEW from './ux-select.html';\n\ndeclare module './ux-option' {\n  interface UxOption {\n    uxSelect: UxSelect;\n  }\n}\n\ndeclare module './ux-optgroup' {\n  interface UxOptGroup {\n    uxSelect: UxSelect;\n  }\n}\n\nconst UP = 38;\n// const RIGHT = 39;\nconst DOWN = 40;\n// const LEFT = 37;\n// const ESC = 27;\nconst ENTER = 13;\nconst SPACE = 32;\nconst logger = getLogger('ux-select');\nconst invalidMultipleValueMsg = 'Only null or Array instances can be bound to a multi-select';\nconst selectArrayContext = 'context:ux-select';\n\nexport interface UxSelectElement<T = any> extends HTMLElement {\n  matcher(a: any, b: any): boolean;\n  value: T;\n}\n\nexport interface UxOptionContainer extends HTMLElement {\n  children: HTMLCollectionOf<UxOptGroupElement | UxOptionElement>;\n}\n\n@inject(Element, StyleEngine, ObserverLocator, TaskQueue)\n@processContent(extractUxOption)\n@customElement('ux-select')\n@inlineView(UX_SELECT_VIEW)\nexport class UxSelect implements UxComponent {\n\n  private selectedOption: UxOptionElement | null = null;\n\n  // Temporarily used to store <ux-option/> reference in interaction\n  private focusedUxOption: UxOptionElement | null;\n\n  // Observe window events\n  private winEvents: ElementEvents;\n\n  @bindable()\n  public theme: UxSelectTheme;\n\n  @bindable()\n  public autofocus: boolean | string;\n\n  @bindable({ defaultValue: false })\n  public disabled: boolean | string;\n\n  @bindable({ defaultValue: false })\n  public multiple: boolean | string;\n\n  @bindable()\n  public placeholder: string;\n\n  public value: any;\n  public displayValue: string;\n  public expanded: boolean;\n\n  // Populated by Aurelia\n  public readonly optionWrapperEl: HTMLElement;\n  public readonly optionCtEl: UxOptionContainer;\n\n  constructor(\n    public readonly element: UxSelectElement,\n    private styleEngine: StyleEngine,\n    private observerLocator: ObserverLocator,\n    private taskQueue: TaskQueue\n  ) {\n    // Only chrome persist the element prototype when cloning with clone node\n    Object.setPrototypeOf(element, UxSelectElementProto);\n  }\n\n  public bind() {\n    if (bool(this.autofocus)) {\n      // setTimeout(focusEl, 0, this.button);\n    }\n    if (this.isMultiple) {\n      if (!this.value) {\n        this.value = [];\n      } else if (!Array.isArray(this.value)) {\n        throw new Error(invalidMultipleValueMsg);\n      }\n    }\n    if (!this.winEvents) {\n      this.winEvents = new ElementEvents(window as any);\n    }\n    // Initially Synchronize options with value of this element\n    this.taskQueue.queueMicroTask(this);\n  }\n\n  public attached() {\n    this.resolveDisplayValue();\n  }\n\n  public unbind() {\n    this.winEvents.disposeAll();\n    if (this.arrayObserver) {\n      this.arrayObserver.unsubscribe(selectArrayContext, this);\n      this.arrayObserver = null;\n    }\n    this.selectedOption = null;\n  }\n\n  private resolveDisplayValue() {\n    const values = this.options\n      .filter(option =>\n        Array.isArray(this.value) ?\n          this.value.some(value => value === option.value) :\n          option.value === this.value)\n      .map(t => t.innerText);\n\n    this.displayValue = values.join(', ');\n\n    if (this.displayValue.length > 0) {\n      this.element.classList.add('ux-select--has-value');\n    } else {\n      this.element.classList.remove('ux-select--has-value');\n    }\n  }\n\n  private ignoreSelectEvent: boolean = true;\n  private synchronizeOptions() {\n    const value = this.value;\n    const isArray = Array.isArray(value);\n\n    const options = this.options;\n    const matcher = this.element.matcher || defaultMatcher;\n\n    let i = options.length;\n    this.ignoreSelectEvent = true;\n    while (i--) {\n      const option = options[i];\n      const optionValue = option.value;\n      if (isArray) {\n        option.selected = value.findIndex((item: any) => !!matcher(optionValue, item)) !== -1;\n        continue;\n      }\n      option.selected = !!matcher(optionValue, value);\n    }\n    this.ignoreSelectEvent = false;\n  }\n\n  private synchronizeValue() {\n    const options = this.options;\n    const ii = options.length;\n    let count = 0;\n    let optionValues: any[] | null = [];\n\n    // extract value from ux-option\n    for (let i = 0; i < ii; i++) {\n      const option = options[i];\n      if (!option.selected) {\n        continue;\n      }\n      optionValues.push(option.value);\n      count++;\n    }\n\n    if (this.isMultiple) {\n      // multi-select\n      if (Array.isArray(this.value)) {\n        const selectValues = this.value;\n        const matcher = this.element.matcher || defaultMatcher;\n        // remove items that are no longer selected.\n        let i = 0;\n        while (i < selectValues.length) {\n          const a = selectValues[i];\n          if (optionValues.findIndex(b => matcher(a, b)) === -1) {\n            selectValues.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n        // add items that have been selected.\n        i = 0;\n        while (i < optionValues.length) {\n          const a = optionValues[i];\n          if (selectValues.findIndex(b => matcher(a, b)) === -1) {\n            selectValues.push(a);\n          }\n          i++;\n        }\n        this.resolveDisplayValue();\n        return; // don't notify.\n      }\n    } else {\n      // single-select\n      // tslint:disable-next-line:prefer-conditional-expression\n      if (count === 0) {\n        optionValues = null;\n      } else {\n        optionValues = optionValues[0];\n      }\n      this.setValue(optionValues);\n    }\n  }\n\n  private setupListAnchor() {\n    this.calcAnchorPosition();\n    this.winEvents.subscribe('wheel', (e: WheelEvent) => {\n      if (this.expanded) {\n        if (e.target === PLATFORM.global || !this.optionWrapperEl.contains(e.target as HTMLElement)) {\n          this.collapse();\n        }\n      }\n    }, true);\n  }\n\n  private unsetupListAnchor() {\n    this.listAnchor = null;\n    this.winEvents.disposeAll();\n  }\n\n  public listAnchor: { x: number | string, y: number | string } | null;\n  private calcAnchorPosition() {\n    const elDim = this.element.getBoundingClientRect();\n    const offsetY = (48 - elDim.height) / 2;\n    this.listAnchor = { x: elDim.left, y: elDim.top - offsetY };\n  }\n\n  private onKeyboardSelect() {\n    if (!this.expanded) {\n      return;\n    }\n    const focusedOption = this.focusedUxOption;\n    if (this.isMultiple) {\n      if (!focusedOption) {\n        return;\n      }\n      focusedOption.selected = !focusedOption.selected;\n    } else {\n      this.collapse();\n    }\n  }\n\n  public call() {\n    this.synchronizeOptions();\n  }\n\n  public getValue() {\n    return this.value;\n  }\n\n  private arrayObserver: InternalCollectionObserver | null;\n  public setValue(newValue: any) {\n    if (newValue !== null && newValue !== undefined && this.isMultiple && !Array.isArray(newValue)) {\n      throw new Error('Only null, undenfined or Array instances can be bound to a multi-select.');\n    }\n\n    if (this.value === newValue) {\n      return;\n    }\n    // unsubscribe from old array.\n    if (this.arrayObserver) {\n      this.arrayObserver.unsubscribe(selectArrayContext, this);\n      this.arrayObserver = null;\n    }\n    if (this.isMultiple) {\n      // subscribe to new array.\n      if (Array.isArray(newValue)) {\n        this.arrayObserver = this.observerLocator.getArrayObserver(newValue);\n        this.arrayObserver.subscribe(selectArrayContext, this);\n      }\n    }\n    if (newValue !== this.value) {\n      this.value = newValue;\n      this.resolveDisplayValue();\n      this.element.dispatchEvent(DOM.createCustomEvent('change', { bubbles: true }));\n    }\n  }\n\n  private isExpanding: boolean;\n  public expand() {\n    if (this.expanded) {\n      return;\n    }\n    if (this.isExpanding) {\n      return;\n    }\n    this.isExpanding = true;\n    this.optionWrapperEl.classList.add('ux-select__list-wrapper--open');\n    setTimeout(() => {\n      this.optionCtEl.classList.add('ux-select__list-container--open');\n      this.isExpanding = false;\n      this.expanded = true;\n      this.setFocusedOption(this.selectedOption);\n    }, 0);\n    this.setupListAnchor();\n  }\n\n  private isCollapsing: boolean;\n  public collapse() {\n    if (this.isCollapsing) {\n      return;\n    }\n    this.isCollapsing = true;\n    this.optionCtEl.classList.remove('ux-select__list-container--open');\n    setTimeout(() => {\n      this.optionWrapperEl.classList.remove('ux-select__list-wrapper--open');\n      this.isCollapsing = false;\n      this.expanded = false;\n      this.setFocusedOption(null);\n      this.unsetupListAnchor();\n    }, this.theme && this.theme.listTransition || 125);\n  }\n\n  private setFocusedOption(focusedOption: UxOptionElement | null) {\n    const oldFocusedOption = this.focusedUxOption;\n    if (focusedOption !== oldFocusedOption) {\n      if (oldFocusedOption) {\n        oldFocusedOption.focused = false;\n      }\n      if (focusedOption) {\n        focusedOption.focused = true;\n        focusedOption.scrollIntoView({ block: 'nearest', inline: 'nearest' });\n      }\n      this.focusedUxOption = focusedOption;\n    }\n  }\n\n  public moveSelectedIndex(offset: number) {\n    let currentIndex: number = 0;\n    const options = this.options;\n    if (this.focusedUxOption) {\n      currentIndex = options.indexOf(this.focusedUxOption);\n    } else if (this.selectedOption) {\n      currentIndex = options.indexOf(this.selectedOption);\n    }\n    let nextIndex = currentIndex + offset;\n    if (nextIndex > options.length - 1) {\n      nextIndex = options.length - 1;\n    }\n    if (nextIndex < 0) {\n      nextIndex = 0;\n    }\n    const focusedOption = options[nextIndex];\n    if (focusedOption.disabled) {\n      if (offset > 0) {\n        if (nextIndex === options.length - 1) {\n          return;\n        }\n        this.moveSelectedIndex(offset + 1);\n      } else {\n        if (nextIndex < 0) {\n          return;\n        }\n        this.moveSelectedIndex(offset - 1);\n      }\n      return;\n    }\n    this.setFocusedOption(focusedOption);\n    focusedOption.focused = true;\n    if (this.isMultiple) {\n      // empty\n    } else {\n      this.ignoreSelectEvent = true;\n      if (this.selectedOption) {\n        this.selectedOption.selected = false;\n      }\n      this.selectedOption = focusedOption;\n      this.selectedOption.selected = true;\n      this.ignoreSelectEvent = false;\n      this.setValue(this.selectedOption.value);\n    }\n  }\n\n  public onTriggerClick() {\n    if (!this.isDisabled) {\n      if (this.expanded) {\n        return;\n      }\n      this.expand();\n    }\n  }\n\n  public onBlur() {\n    if (!this.element.contains(DOM.activeElement)) {\n      this.collapse();\n    }\n  }\n\n  public onSelect(e: CustomEvent) {\n    e.stopPropagation();\n    if (this.ignoreSelectEvent) {\n      return;\n    }\n    const newSelection: UxOptionElement = e.detail;\n    const lastSelection = this.selectedOption;\n    if (this.isMultiple) {\n      this.synchronizeValue();\n    } else {\n      this.ignoreSelectEvent = true;\n      if (lastSelection) {\n        lastSelection.selected = false;\n      }\n      this.ignoreSelectEvent = false;\n      this.selectedOption = newSelection;\n      this.setValue(newSelection.value);\n\n      if (this.expanded) {\n        this.collapse();\n      }\n    }\n  }\n\n  public onKeyDown(event: KeyboardEvent) {\n    if (this.isDisabled) {\n      return;\n    }\n    // tslint:disable-next-line:switch-default\n    switch (event.which) {\n      case UP: case DOWN:\n        this.moveSelectedIndex(event.which === UP ? -1 : 1);\n        event.preventDefault();\n        break;\n      case ENTER: case SPACE:\n        this.onKeyboardSelect();\n        event.preventDefault();\n        break;\n    }\n    return true;\n  }\n\n  public themeChanged(newValue: UxSelectTheme) {\n    if (newValue && !newValue.themeKey) {\n      newValue.themeKey = 'ux-select';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n\n  public multipleChanged(newValue: boolean | string, oldValue: boolean | string) {\n    newValue = bool(newValue);\n    oldValue = bool(oldValue);\n    const hasChanged = newValue !== oldValue;\n\n    if (hasChanged) {\n      this.ignoreSelectEvent = true;\n      for (const opt of this.options) {\n        opt.selected = false;\n      }\n      this.ignoreSelectEvent = false;\n      this.selectedOption = null;\n      this.setValue(newValue\n        ? [] // Changing from single to multiple = reset value to empty array\n        : null // Changing from multiple to single = reset value to null\n      );\n    }\n  }\n\n  public get options(): UxOptionElement[] {\n    if (!this.optionCtEl) {\n      return [];\n    }\n    const result: UxOptionElement[] = [];\n    const children = this.optionCtEl.children;\n    const ii = children.length;\n    for (let i = 0; ii > i; ++i) {\n      const element = children[i];\n      if (element.nodeName === 'UX-OPTION') {\n        result.push(element);\n      } else if (element.nodeName === 'UX-OPTGROUP') {\n        const groupOptions = element.options;\n        const jj = groupOptions.length;\n        for (let j = 0; jj > j; ++j) {\n          result.push(groupOptions[j]);\n        }\n      }\n    }\n    return result;\n  }\n\n  public getOptions() {\n    return this.options;\n  }\n\n  @computedFrom('multiple')\n  public get isMultiple() {\n    return bool(this.multiple);\n  }\n\n  @computedFrom('disabled')\n  public get isDisabled() {\n    return bool(this.disabled);\n  }\n}\n\nfunction extractUxOption(\n  _: ViewCompiler,\n  __: ViewResources,\n  node: HTMLElement\n) {\n  if (node.hasAttribute('containerless')) {\n    logger.warn('Cannot use containerless on <ux-select/>. Consider using as-element instead.');\n    node.removeAttribute('containerless');\n  }\n  let currentChild: any = node.firstChild;\n\n  while (currentChild) {\n    const nextSibling = currentChild.nextSibling;\n    if (currentChild.nodeName === 'UX-OPTION' || currentChild.nodeName === 'UX-OPTGROUP') {\n      currentChild = nextSibling;\n      continue;\n    }\n    node.removeChild(currentChild);\n    currentChild = nextSibling;\n  }\n  return true;\n}\n\nconst UxSelectElementProto = Object.create(HTMLElement.prototype, {\n  value: {\n    get() {\n      return getAuViewModel<UxSelect>(this).getValue();\n    },\n    set(v: any) {\n      return getAuViewModel<UxSelect>(this).setValue(v);\n    }\n  },\n  options: {\n    get() {\n      return getAuViewModel<UxSelect>(this).getOptions();\n    }\n  }\n});\n\nfunction defaultMatcher<T = any>(a: T, b: T) {\n  return a === b;\n}\n","import {\n  customElement,\n  bindable,\n  ViewCompiler,\n  ViewResources,\n  processContent,\n  DOM,\n  inject,\n  inlineView,\n  BindingEngine,\n  Disposable,\n} from 'aurelia-framework';\n\nimport { UxOptionElement } from './ux-option';\nimport { getAuViewModel } from './util';\nimport * as UX_OPTGROUP_VIEW from './ux-optgroup.html';\n\ndeclare module './ux-option' {\n  interface UxOption {\n    optGroup: UxOptGroup | null;\n  }\n}\n\nexport interface UxOptGroupElement extends HTMLElement {\n  nodeName: 'UX-OPTGROUP';\n  options: UxOptionElement[];\n}\n\nexport interface OptGroupOptionsCt extends HTMLElement {\n  children: HTMLCollectionOf<UxOptionElement>;\n}\n\n@inject(DOM.Element, BindingEngine)\n@processContent(extractUxOptions)\n@customElement('ux-optgroup')\n@inlineView(UX_OPTGROUP_VIEW)\nexport class UxOptGroup {\n\n  private subscriptions: Disposable[];\n  private parentDisabled: boolean;\n\n  @bindable()\n  public label: string;\n\n  public disabled: boolean;\n  public isDisabled: boolean;\n  public readonly optionsCt: OptGroupOptionsCt;\n\n  constructor(\n    public readonly element: UxOptGroupElement,\n    private bindingEngine: BindingEngine\n  ) {\n    Object.setPrototypeOf(element, UxOptGroupElementProto);\n  }\n\n  public created() {\n    const element = this.element;\n    this.setDisabled(element.hasAttribute('disabled'));\n    element.removeAttribute('disabled');\n  }\n\n  public bind() {\n    const uxSelect = this.uxSelect = this.getUxSelect();\n    this.setParentDisabled(uxSelect.isDisabled);\n  }\n\n  public attached() {\n    const be = this.bindingEngine;\n    const uxSelect = this.uxSelect;\n    this.subscriptions = [\n      be.propertyObserver(uxSelect, 'isDisabled').subscribe(this.setParentDisabled.bind(this))\n    ];\n  }\n\n  public detached() {\n    for (const s of this.subscriptions) {\n      s.dispose();\n    }\n    this.subscriptions.length = 0;\n  }\n\n  private getUxSelect() {\n    let el: HTMLElement | null = this.element;\n    while (el) {\n      if (el.tagName === 'UX-SELECT') {\n        return getAuViewModel<UxOptGroup['uxSelect']>(el);\n      }\n      el = el.parentElement;\n    }\n    throw new Error('Ux option group has no \"ux-select\" parent');\n  }\n\n  private setParentDisabled(disabled: boolean) {\n    this.parentDisabled = !!disabled;\n    this.isDisabled = this.disabled || this.parentDisabled;\n  }\n\n  public getOptions(): UxOptionElement[] {\n    if (!this.optionsCt) {\n      return [];\n    }\n    return Array.from(this.optionsCt.children);\n  }\n\n  public getDisabled() {\n    return this.disabled;\n  }\n\n  public setDisabled(disabled: boolean) {\n    this.disabled = disabled;\n    this.isDisabled = disabled || this.parentDisabled;\n  }\n}\n\nfunction extractUxOptions(\n  _: ViewCompiler,\n  __: ViewResources,\n  node: Element\n) {\n  let currentChild: any = node.firstChild;\n  while (currentChild) {\n    const nextSibling = currentChild.nextSibling;\n    if (currentChild.nodeName !== 'UX-OPTION') {\n      node.removeChild(currentChild);\n    }\n    currentChild = nextSibling;\n  }\n  return true;\n}\n\nconst UxOptGroupElementProto = Object.create(HTMLElement.prototype, {\n  options: {\n    get() {\n      return getAuViewModel<UxOptGroup>(this).getOptions();\n    }\n  },\n  disabled: {\n    get() {\n      return getAuViewModel<UxOptGroup>(this).getDisabled();\n    },\n    set(disabled: boolean) {\n      return getAuViewModel<UxOptGroup>(this).setDisabled(disabled);\n    }\n  }\n});\n","import {\n  inject,\n  bindable,\n  DOM,\n  ElementEvents,\n  PLATFORM,\n  ViewCompiler,\n  ViewResources,\n  customElement,\n  Disposable,\n  BindingEngine,\n  inlineView,\n  processAttributes,\n} from 'aurelia-framework';\n\nimport {\n  PaperRipple\n} from '@aurelia-ux/core';\n\nimport { getAuViewModel } from './util';\nimport * as UX_OPTION_VIEW from './ux-option.html';\n\nexport interface UxOptionElement extends HTMLElement {\n  disabled: boolean;\n  focused: boolean;\n  nodeName: 'UX-OPTION';\n  selected: boolean;\n  ripple: PaperRipple;\n  value: any;\n  wave(): void;\n}\n\nexport interface UxOptionSelectEvent extends Event {\n  target: UxOptionElement;\n}\n\n@inject(DOM.Element, BindingEngine)\n@customElement('ux-option')\n@processAttributes(convertTextToAttr)\n@inlineView(UX_OPTION_VIEW)\nexport class UxOption {\n\n  private selected: boolean = false;\n\n  private subscriptions: Disposable[];\n\n  public disabled: boolean;\n  public parentDisabled: boolean;\n  public isDisabled: boolean;\n  public focused: boolean = false;\n\n  public isMultiple: boolean;\n\n  // populated by aurelia\n  public readonly textEl: HTMLElement;\n\n  @bindable()\n  public text: string;\n\n  @bindable()\n  public value: any;\n\n  constructor(\n    public readonly element: UxOptionElement,\n    private bindingEngine: BindingEngine\n  ) {\n    Object.setPrototypeOf(element, UxOptionElementProto);\n  }\n\n  public created() {\n    const element = this.element;\n\n    if (element.hasAttribute('value')) {\n      this.value = element.getAttribute('value');\n    }\n\n    this.setDisabled(element.hasAttribute('disabled'));\n    element.removeAttribute('disabled');\n    element.removeAttribute('text');\n  }\n\n  public bind() {\n    if (this.value === undefined) {\n      this.value = this.text;\n    }\n  }\n\n  public attached() {\n    const optGroup = this.optGroup = this.getOptGroup();\n    const uxSelect = this.uxSelect = this.getUxSelect();\n    const bindingEngine = this.bindingEngine;\n    this.setParentDisabled(optGroup ? optGroup.isDisabled : uxSelect.isDisabled);\n    this.isMultiple = uxSelect.isMultiple;\n    this.subscriptions = [\n      bindingEngine.propertyObserver(uxSelect, 'isMultiple').subscribe(this.uxMultipleChanged.bind(this)),\n      optGroup\n        // ux-opt group will also subscribe to ux-select to know if it's disabled\n        ? bindingEngine.propertyObserver(optGroup, 'isDisabled').subscribe(this.setParentDisabled.bind(this))\n        // If ux-option is not a member of a group, then subscribe to disabled state of ux-select\n        : bindingEngine.propertyObserver(uxSelect, 'isDisabled').subscribe(this.setParentDisabled.bind(this))\n    ];\n  }\n\n  public detached() {\n    for (const s of this.subscriptions) {\n      s.dispose();\n    }\n    this.subscriptions.length = 0;\n  }\n\n  private getOptGroup() {\n    let el: HTMLElement | null = this.element;\n    while (el) {\n      if (el.tagName === 'UX-OPTGROUP') {\n        return getAuViewModel<UxOption['optGroup']>(el);\n      }\n      el = el.parentElement;\n    }\n    return null;\n  }\n\n  private getUxSelect() {\n    let el: HTMLElement | null = this.element;\n    while (el) {\n      if (el.tagName === 'UX-SELECT') {\n        return getAuViewModel<UxOption['uxSelect']>(el);\n      }\n      el = el.parentElement;\n    }\n    throw new Error('Ux option has no \"ux-select\" parent');\n  }\n\n  private uxMultipleChanged(useSelect: boolean) {\n    this.isMultiple = useSelect;\n  }\n\n  private setParentDisabled(disabled: boolean) {\n    this.parentDisabled = !!disabled;\n    this.isDisabled = this.disabled || this.parentDisabled;\n  }\n\n  private notify() {\n    this.element.dispatchEvent(DOM.createCustomEvent('select', { bubbles: true, detail: this.element }));\n  }\n\n  public getFocused() {\n    return this.focused;\n  }\n\n  public setFocused(focused: boolean) {\n    this.focused = !!focused;\n  }\n\n  public getSelected() {\n    return this.selected;\n  }\n\n  public setSelected(selected: boolean) {\n    const oldValue = this.selected;\n    const newValue = !!selected;\n    if (newValue !== oldValue) {\n      this.selected = newValue;\n      this.notify();\n    }\n  }\n\n  public getDisabled() {\n    return this.disabled || this.parentDisabled;\n  }\n\n  public setDisabled(disabled: boolean) {\n    this.disabled = !!disabled;\n    this.isDisabled = this.disabled || this.parentDisabled;\n  }\n\n  public onClick() {\n    if (!this.disabled) {\n      if (this.isMultiple) {\n        this.setSelected(!this.selected);\n      } else {\n        this.selected = true;\n        this.notify();\n      }\n    }\n  }\n\n  public onMouseDown(e: MouseEvent) {\n    this.addWave(e);\n    return true;\n  }\n\n  /**\n   * @param autoEnd Internal flag to distinguish between keyboard navigation and mouse\n   */\n  public addWave(e?: MouseEvent | null, autoEnd?: boolean) {\n    const target = this.element;\n\n    if (target.classList.contains('ripple')) {\n      if (target.ripple === null || target.ripple === undefined) {\n        target.ripple = new PaperRipple();\n        target.appendChild(target.ripple.$);\n      }\n\n      target.ripple.downAction(e!);\n      if (autoEnd) {\n        setTimeout(removeWave, 125, target);\n      } else {\n        new ElementEvents(PLATFORM.global).subscribeOnce('mouseup', () => {\n          target.ripple.upAction();\n        }, true);\n      }\n    }\n  }\n}\n\nfunction removeWave(el: UxOptionElement) {\n  el.ripple.upAction();\n}\n\nfunction convertTextToAttr(_: ViewCompiler, __: ViewResources, node: UxOptionElement, attributes: NamedNodeMap) {\n  const ii = attributes.length;\n  for (let i = 0; ii > i; ++i) {\n    const attr = attributes[i];\n    if (attr.nodeName === 'text') {\n      return;\n    }\n    const parts = attr.nodeName.split('.');\n    if (parts[0] === 'text') {\n      return;\n    }\n  }\n  node.setAttribute('text', node.textContent || '');\n  node.textContent = '';\n}\n\nconst UxOptionElementProto = Object.create(HTMLElement.prototype, {\n  disabled: {\n    get() {\n      return getAuViewModel<UxOption>(this).getDisabled();\n    },\n    set(disabled: boolean) {\n      getAuViewModel<UxOption>(this).setDisabled(disabled);\n    }\n  },\n  focused: {\n    get() {\n      return getAuViewModel<UxOption>(this).getFocused();\n    },\n    set(focused: boolean) {\n      getAuViewModel<UxOption>(this).setFocused(focused);\n    }\n  },\n  selected: {\n    get() {\n      return getAuViewModel<UxOption>(this).getSelected();\n    },\n    set(selected: boolean) {\n      getAuViewModel<UxOption>(this).setSelected(selected);\n    }\n  },\n  value: {\n    get() {\n      return getAuViewModel<UxOption>(this).value;\n    },\n    set(value: any) {\n      getAuViewModel<UxOption>(this).value = value;\n    }\n  },\n  wave: {\n    value(): void {\n      getAuViewModel<UxOption>(this).addWave(null, true);\n    }\n  }\n});\n","import { UxTheme } from '@aurelia-ux/core';\n\nexport class UxSelectTheme implements UxTheme {\n  public themeKey = 'select';\n\n  public foreground: string;\n  public background: string;\n\n  public triggerBorder: string;\n  public triggerBorderDisabled: string;\n  public triggerBorderFocused: string;\n\n  public listMaxWidth: number;\n  public listMaxWidthPx: string;\n  public listMaxHeight: number;\n  public listMaxHeightPx: string;\n  public listBackground: string;\n  public listTransition: number;\n  public listTransitionS: string;\n\n  public optionHover: string;\n  public optionFocused: string;\n  public optionSelected: string;\n\n  public borderBottom: string;\n  public borderBottomHover: string;\n  public borderBottomSelected: string;\n\n  public listboxShadow: string;\n\n  public error: string;\n}\n","/// <reference path=\"html.d.ts\" />\nimport {\n  FrameworkConfiguration,\n  bindingMode,\n} from 'aurelia-framework';\n\nimport { ValueAttributeObserver, EventSubscriber } from 'aurelia-binding';\n\nimport { AureliaUX } from '@aurelia-ux/core';\nimport { UxSelect } from './ux-select';\nimport { UxOptGroup } from './ux-optgroup';\nimport { UxOption } from './ux-option';\n\nexport { UxOption, UxOptionElement } from './ux-option';\nexport { UxOptGroup, UxOptGroupElement } from './ux-optgroup';\nexport { UxSelect, UxSelectElement } from './ux-select';\nexport { UxSelectTheme } from './ux-select-theme';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.container.get(AureliaUX).registerUxElementConfig(uxSelectConfig);\n  config.globalResources([\n    UxSelect,\n    UxOptGroup,\n    UxOption\n  ]);\n}\n\nconst uxSelectConfig = {\n  tagName: 'ux-select',\n  properties: {\n    value: {\n      defaultBindingMode: bindingMode.twoWay,\n      getObserver(element: Element, _: string) {\n        return new ValueAttributeObserver(element, 'value', new EventSubscriber(['change']));\n      }\n    }\n  }\n};\n"],"names":[],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../../src/ux-form.ts","../../src/ux-field.ts","../../src/ux-submit-attribute.ts","../../src/ux-form-theme.ts","../../src/index.ts"],"sourcesContent":["import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent } from '@aurelia-ux/core';\nimport { UxFormTheme } from './ux-form-theme';\nimport * as UX_FORM_VIEW from './ux-form.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-form')\n@inlineView(UX_FORM_VIEW)\nexport class UxForm implements UxComponent {\n  @bindable public theme: UxFormTheme;\n  @bindable public submitOnEnter: any;\n\n  private bindSubmitToEnter: boolean = false;\n\n  constructor(private element: HTMLElement, private styleEngine: StyleEngine) { }\n\n  public bind() {\n    if (this.theme != null) {\n      this.themeChanged(this.theme);\n    }\n\n    if (this.submitOnEnter !== undefined) {\n      this.bindSubmitToEnter = true;\n    }\n  }\n\n  public attached() {\n    if (this.bindSubmitToEnter) {\n      this.element.addEventListener('keyup', (e: KeyboardEvent) => {\n        let canSubmit = true;\n\n        if (e.srcElement != null && (e.srcElement as Element).tagName === 'TEXTAREA') {\n          canSubmit = false;\n        }\n\n        if (e.keyCode === 13 && canSubmit) {\n          this.submitForm();\n        }\n      });\n    }\n  }\n\n  public detached() {\n    if (this.bindSubmitToEnter) {\n      this.element.removeEventListener('keyup', (e: KeyboardEvent) => {\n        if (e.keyCode === 13) {\n          this.submitForm();\n        }\n      });\n    }\n  }\n\n  public themeChanged(newValue: any) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'form';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n\n  public submitForm() {\n    const submitEvent = DOM.createCustomEvent('submit', { bubbles: true, target: this.element } as any);\n\n    this.element.dispatchEvent(submitEvent);\n  }\n}\n","import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { inject } from 'aurelia-dependency-injection';\nimport * as UX_FIELD_VIEW from './ux-field.html';\n\n@inject(Element)\n@customElement('ux-field')\n@inlineView(UX_FIELD_VIEW)\nexport class UxField {\n  @bindable public label: string;\n\n  private labelElement: HTMLLabelElement;\n\n  constructor(private element: Element) { }\n\n  public attached() {\n    if (this.label && !this.element.querySelector('label')) {\n      this.labelElement = document.createElement('label');\n\n      this.labelElement.textContent = this.label;\n\n      this.element.insertBefore(this.labelElement, this.element.firstChild);\n    }\n  }\n\n  public labelChanged(newValue: string) {\n    if (this.labelElement != null) {\n      this.labelElement.textContent = newValue;\n    }\n  }\n}\n","import { inject } from 'aurelia-dependency-injection';\nimport { DOM } from 'aurelia-pal';\n\n@inject(Element)\nexport class UxSubmitCustomAttribute {\n  public submitEvent: CustomEvent;\n  private canSubmit: boolean = false;\n\n  constructor(public element: Element) { }\n\n  public attached() {\n    let currentParent = this.element.parentElement;\n\n    while (currentParent != null) {\n      if (currentParent.tagName === 'UX-FORM') {\n\n        this.canSubmit = true;\n        this.submitEvent = DOM.createCustomEvent('submit', { bubbles: true });\n\n        this.element.addEventListener('mouseup', () => {\n          this.element.dispatchEvent(this.submitEvent);\n        });\n\n        break;\n      }\n\n      currentParent = currentParent.parentElement;\n    }\n  }\n\n  public detached() {\n    if (this.canSubmit) {\n      this.element.removeEventListener('mouseup', () => {\n        this.element.dispatchEvent(this.submitEvent);\n      });\n    }\n  }\n}\n","import { UxTheme } from '@aurelia-ux/core';\n\nexport class UxFormTheme implements UxTheme {\n  public themeKey = 'form';\n\n  public labelFontSize: string;\n  public labelColor: string;\n}\n","/// <reference path=\"html.d.ts\" />\nimport { FrameworkConfiguration } from 'aurelia-framework';\nimport { UxForm } from './ux-form';\nimport { UxField } from './ux-field';\nimport { UxSubmitCustomAttribute } from './ux-submit-attribute';\n\nexport { UxFormTheme } from './ux-form-theme';\nexport { UxForm, UxField, UxSubmitCustomAttribute };\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources([\n    UxForm,\n    UxField,\n    UxSubmitCustomAttribute\n  ]);\n}\n"],"names":["DOM","bindable","inject","StyleEngine","customElement","inlineView"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../../src/ux-form.ts","../../src/ux-field.ts","../../src/ux-submit-attribute.ts","../../src/ux-form-theme.ts","../../src/index.ts"],"sourcesContent":["import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent } from '@aurelia-ux/core';\nimport { UxFormTheme } from './ux-form-theme';\nimport * as UX_FORM_VIEW from './ux-form.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-form')\n@inlineView(UX_FORM_VIEW)\nexport class UxForm implements UxComponent {\n  @bindable public theme: UxFormTheme;\n  @bindable public submitOnEnter: any;\n\n  private bindSubmitToEnter: boolean = false;\n\n  constructor(private element: HTMLElement, private styleEngine: StyleEngine) { }\n\n  public bind() {\n    if (this.theme != null) {\n      this.themeChanged(this.theme);\n    }\n\n    if (this.submitOnEnter !== undefined) {\n      this.bindSubmitToEnter = true;\n    }\n  }\n\n  public attached() {\n    if (this.bindSubmitToEnter) {\n      this.element.addEventListener('keyup', (e: KeyboardEvent) => {\n        let canSubmit = true;\n\n        if (e.srcElement != null && (e.srcElement as Element).tagName === 'TEXTAREA') {\n          canSubmit = false;\n        }\n\n        if (e.keyCode === 13 && canSubmit) {\n          this.submitForm();\n        }\n      });\n    }\n  }\n\n  public detached() {\n    if (this.bindSubmitToEnter) {\n      this.element.removeEventListener('keyup', (e: KeyboardEvent) => {\n        if (e.keyCode === 13) {\n          this.submitForm();\n        }\n      });\n    }\n  }\n\n  public themeChanged(newValue: any) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'form';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n\n  public submitForm() {\n    const submitEvent = DOM.createCustomEvent('submit', { bubbles: true, target: this.element } as any);\n\n    this.element.dispatchEvent(submitEvent);\n  }\n}\n","import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { inject } from 'aurelia-dependency-injection';\nimport * as UX_FIELD_VIEW from './ux-field.html';\n\n@inject(Element)\n@customElement('ux-field')\n@inlineView(UX_FIELD_VIEW)\nexport class UxField {\n  @bindable public label: string;\n\n  private labelElement: HTMLLabelElement;\n\n  constructor(private element: Element) { }\n\n  public attached() {\n    if (this.label && !this.element.querySelector('label')) {\n      this.labelElement = document.createElement('label');\n\n      this.labelElement.textContent = this.label;\n\n      this.element.insertBefore(this.labelElement, this.element.firstChild);\n    }\n  }\n\n  public labelChanged(newValue: string) {\n    if (this.labelElement != null) {\n      this.labelElement.textContent = newValue;\n    }\n  }\n}\n","import { inject } from 'aurelia-dependency-injection';\nimport { DOM } from 'aurelia-pal';\n\n@inject(Element)\nexport class UxSubmitCustomAttribute {\n  public submitEvent: CustomEvent;\n  private canSubmit: boolean = false;\n\n  constructor(public element: Element) { }\n\n  public attached() {\n    let currentParent = this.element.parentElement;\n\n    while (currentParent != null) {\n      if (currentParent.tagName === 'UX-FORM') {\n\n        this.canSubmit = true;\n        this.submitEvent = DOM.createCustomEvent('submit', { bubbles: true });\n\n        this.element.addEventListener('mouseup', () => {\n          this.element.dispatchEvent(this.submitEvent);\n        });\n\n        break;\n      }\n\n      currentParent = currentParent.parentElement;\n    }\n  }\n\n  public detached() {\n    if (this.canSubmit) {\n      this.element.removeEventListener('mouseup', () => {\n        this.element.dispatchEvent(this.submitEvent);\n      });\n    }\n  }\n}\n","import { UxTheme } from '@aurelia-ux/core';\n\nexport class UxFormTheme implements UxTheme {\n  public themeKey = 'form';\n\n  public labelFontSize: string;\n  public labelColor: string;\n}\n","/// <reference path=\"html.d.ts\" />\nimport { FrameworkConfiguration } from 'aurelia-framework';\nimport { UxForm } from './ux-form';\nimport { UxField } from './ux-field';\nimport { UxSubmitCustomAttribute } from './ux-submit-attribute';\n\nexport { UxFormTheme } from './ux-form-theme';\nexport { UxForm, UxField, UxSubmitCustomAttribute };\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources([\n    UxForm,\n    UxField,\n    UxSubmitCustomAttribute\n  ]);\n}\n"],"names":["DOM","bindable","inject","StyleEngine","customElement","inlineView"],"mappings":"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"}
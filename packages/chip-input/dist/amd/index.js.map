{"version":3,"file":"index.js","sources":["../../src/ux-chip.ts","../../src/ux-chip-input.ts","../../src/ux-chip-input-theme.ts","../../src/ux-chip-theme.ts","../../src/index.ts"],"sourcesContent":["import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { bindingMode } from 'aurelia-binding';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent } from '@aurelia-ux/core';\nimport { UxChipTheme } from './ux-chip-theme';\nimport * as UX_CHIP_VIEW from './ux-chip.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-chip')\n@inlineView(UX_CHIP_VIEW)\nexport class UxChip implements UxComponent {\n  @bindable public theme: UxChipTheme;\n  @bindable public type: any;\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: any = undefined;\n\n  constructor(\n    private element: HTMLInputElement,\n    private styleEngine: StyleEngine) { }\n\n  public bind() {\n    this.themeChanged(this.theme);\n\n    if (this.element.hasAttribute('deletable')) {\n      this.element.removeAttribute('deletable');\n      this.element.classList.add('ux-chip--deletable');\n    }\n  }\n\n  public themeChanged(newValue: UxChipTheme) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'chip';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n\n  public closeChip() {\n    const closeEvent = DOM.createCustomEvent('close', { bubbles: false });\n\n    this.element.dispatchEvent(closeEvent);\n  }\n}\n","import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { bindingMode } from 'aurelia-binding';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent, normalizeBooleanAttribute } from '@aurelia-ux/core';\nimport { UxChipInputTheme } from './ux-chip-input-theme';\nimport * as UX_CHIP_INPUT_VIEW from './ux-chip-input.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-chip-input')\n@inlineView(UX_CHIP_INPUT_VIEW)\nexport class UxChipInput implements UxComponent {\n  @bindable public disabled: boolean | string = false;\n  @bindable public readonly: boolean | string = false;\n  @bindable public theme: UxChipInputTheme;\n  @bindable public label: any;\n  @bindable public separator: string = ', ';\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: any = undefined;\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public chips: string[] = new Array<string>();\n\n  private textbox: HTMLInputElement;\n  private chiprepeat: Element;\n  private tagrepeat: Element;\n\n  constructor(private element: HTMLElement, private styleEngine: StyleEngine) { }\n\n  public bind() {\n    this.themeChanged(this.theme);\n\n    if (this.element.hasAttribute('placeholder')) {\n      const attributeValue = this.element.getAttribute('placeholder');\n\n      if (attributeValue) {\n        this.textbox.setAttribute('placeholder', attributeValue);\n        this.element.removeAttribute('placeholder');\n      }\n    }\n\n    if (this.value) {\n      this.chips = this.value.split(this.separator);\n    }\n\n    if (normalizeBooleanAttribute('disabled', this.disabled)) {\n      this.textbox.setAttribute('disabled', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    }\n\n    if (normalizeBooleanAttribute('readonly', this.readonly)) {\n      this.textbox.setAttribute('readonly', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    }\n  }\n\n  public attached() {\n    const blurEvent = DOM.createCustomEvent('blur', { bubbles: true });\n\n    this.textbox.addEventListener('focus', () => {\n      this.element.classList.add('ux-chip-input--focused');\n    });\n\n    this.textbox.addEventListener('blur', () => {\n      this.addChip();\n      this.element.classList.remove('ux-chip-input--focused');\n      this.element.dispatchEvent(blurEvent);\n    });\n  }\n\n  public detached() {\n    const blurEvent = DOM.createCustomEvent('blur', { bubbles: true });\n\n    this.textbox.removeEventListener('focus', () => {\n      this.element.classList.add('ux-chip-input--focused');\n    });\n\n    this.textbox.removeEventListener('blur', () => {\n      this.addChip();\n      this.element.classList.remove('ux-chip-input--focused');\n      this.element.dispatchEvent(blurEvent);\n    });\n  }\n\n  public handleKeyup(event: KeyboardEvent) {\n    const key = event.which || event.keyCode;\n\n    if (key === 13) {\n      this.addChip();\n    }\n\n    if (key === 37) {\n      if (this.chips && this.textbox.value === '') {\n        const chip = this.chips.pop();\n\n        if (chip !== undefined) {\n          this.textbox.value = chip;\n        }\n      }\n    }\n  }\n\n  public addChip() {\n    if (this.textbox.value.length) {\n      if (!this.chips) {\n        this.chips = new Array<string>();\n      }\n\n      this.chips.push(this.textbox.value);\n      this.textbox.value = '';\n      this.chipsChanged();\n    }\n  }\n\n  public editChip(value: string) {\n    if (this.textbox.value.length === 0) {\n      this.removeChip(value);\n      this.textbox.value = value;\n      this.chipsChanged();\n    }\n  }\n\n  public removeChip(value: string) {\n    const chipIndex = this.chips.indexOf(value, 0);\n\n    if (chipIndex > -1) {\n      this.chips.splice(chipIndex, 1);\n      this.chipsChanged();\n    }\n  }\n\n  public chipsChanged() {\n    let chipValue: string | null = this.chips.join(this.separator);\n\n    if (chipValue === '') {\n      chipValue = null;\n    }\n\n    if (chipValue !== this.value) {\n      this.value = chipValue;\n    }\n  }\n\n  public valueChanged(newValue: string) {\n    if (newValue && newValue !== this.chips.join(this.separator)) {\n      this.chips = newValue.split(this.separator);\n    }\n  }\n\n  public disabledChanged(newValue: boolean | string) {\n    if (normalizeBooleanAttribute('disabled', newValue)) {\n      this.textbox.setAttribute('disabled', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    } else {\n      this.textbox.removeAttribute('disabled');\n      this.chiprepeat.setAttribute('deletable', '');\n      this.tagrepeat.setAttribute('deletable', '');\n    }\n  }\n\n  public readonlyChanged(newValue: boolean | string) {\n    if (normalizeBooleanAttribute('readonly', newValue)) {\n      this.textbox.setAttribute('readonly', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    } else {\n      this.textbox.removeAttribute('readonly');\n      this.chiprepeat.setAttribute('deletable', '');\n      this.tagrepeat.setAttribute('deletable', '');\n    }\n  }\n\n  public themeChanged(newValue: UxChipInputTheme) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'chip-input';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n}\n","import {  UxTheme } from '@aurelia-ux/core';\n\nexport class UxChipInputTheme implements UxTheme {\n  public themeKey: string = 'chip-input';\n\n  public foreground: string;\n  public bottomBorder: string;\n}\n","import { UxTheme } from '@aurelia-ux/core';\n\nexport class UxChipTheme implements UxTheme {\n  public themeKey: string = 'chip';\n\n  public background: string;\n  public foreground: string;\n\n  public deleteBackground: string;\n  public deleteForeground: string;\n}\n","/// <reference path=\"html.d.ts\" />\nimport { FrameworkConfiguration } from 'aurelia-framework';\nimport { UxChip } from './ux-chip';\nimport { UxChipInput } from './ux-chip-input';\n\nexport { UxChipInputTheme } from './ux-chip-input-theme';\nexport { UxChipTheme } from './ux-chip-theme';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources([\n    UxChipInput,\n    UxChip\n  ]);\n}\n"],"names":["DOM","bindable","bindingMode","inject","StyleEngine","customElement","inlineView","normalizeBooleanAttribute"],"mappings":"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"}
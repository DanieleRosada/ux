{"version":3,"file":"index.js","sources":["../../src/ux-chip.ts","../../src/ux-chip-input.ts","../../src/ux-chip-input-theme.ts","../../src/ux-chip-theme.ts","../../src/index.ts"],"sourcesContent":["import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { bindingMode } from 'aurelia-binding';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent } from '@aurelia-ux/core';\nimport { UxChipTheme } from './ux-chip-theme';\nimport * as UX_CHIP_VIEW from './ux-chip.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-chip')\n@inlineView(UX_CHIP_VIEW)\nexport class UxChip implements UxComponent {\n  @bindable public theme: UxChipTheme;\n  @bindable public type: any;\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: any = undefined;\n\n  constructor(\n    private element: HTMLInputElement,\n    private styleEngine: StyleEngine) { }\n\n  public bind() {\n    this.themeChanged(this.theme);\n\n    if (this.element.hasAttribute('deletable')) {\n      this.element.removeAttribute('deletable');\n      this.element.classList.add('ux-chip--deletable');\n    }\n  }\n\n  public themeChanged(newValue: UxChipTheme) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'chip';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n\n  public closeChip() {\n    const closeEvent = DOM.createCustomEvent('close', { bubbles: false });\n\n    this.element.dispatchEvent(closeEvent);\n  }\n}\n","import { customElement, bindable, inlineView } from 'aurelia-templating';\nimport { DOM } from 'aurelia-pal';\nimport { bindingMode } from 'aurelia-binding';\nimport { inject } from 'aurelia-dependency-injection';\nimport { StyleEngine, UxComponent, normalizeBooleanAttribute } from '@aurelia-ux/core';\nimport { UxChipInputTheme } from './ux-chip-input-theme';\nimport * as UX_CHIP_INPUT_VIEW from './ux-chip-input.html';\n\n@inject(Element, StyleEngine)\n@customElement('ux-chip-input')\n@inlineView(UX_CHIP_INPUT_VIEW)\nexport class UxChipInput implements UxComponent {\n  @bindable public disabled: boolean | string = false;\n  @bindable public readonly: boolean | string = false;\n  @bindable public theme: UxChipInputTheme;\n  @bindable public label: any;\n  @bindable public separator: string = ', ';\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: any = undefined;\n\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public chips: string[] = new Array<string>();\n\n  private textbox: HTMLInputElement;\n  private chiprepeat: Element;\n  private tagrepeat: Element;\n\n  constructor(private element: HTMLElement, private styleEngine: StyleEngine) { }\n\n  public bind() {\n    this.themeChanged(this.theme);\n\n    if (this.element.hasAttribute('placeholder')) {\n      const attributeValue = this.element.getAttribute('placeholder');\n\n      if (attributeValue) {\n        this.textbox.setAttribute('placeholder', attributeValue);\n        this.element.removeAttribute('placeholder');\n      }\n    }\n\n    if (this.value) {\n      this.chips = this.value.split(this.separator);\n    }\n\n    if (normalizeBooleanAttribute('disabled', this.disabled)) {\n      this.textbox.setAttribute('disabled', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    }\n\n    if (normalizeBooleanAttribute('readonly', this.readonly)) {\n      this.textbox.setAttribute('readonly', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    }\n  }\n\n  public attached() {\n    const blurEvent = DOM.createCustomEvent('blur', { bubbles: true });\n\n    this.textbox.addEventListener('focus', () => {\n      this.element.classList.add('ux-chip-input--focused');\n    });\n\n    this.textbox.addEventListener('blur', () => {\n      this.addChip();\n      this.element.classList.remove('ux-chip-input--focused');\n      this.element.dispatchEvent(blurEvent);\n    });\n  }\n\n  public detached() {\n    const blurEvent = DOM.createCustomEvent('blur', { bubbles: true });\n\n    this.textbox.removeEventListener('focus', () => {\n      this.element.classList.add('ux-chip-input--focused');\n    });\n\n    this.textbox.removeEventListener('blur', () => {\n      this.addChip();\n      this.element.classList.remove('ux-chip-input--focused');\n      this.element.dispatchEvent(blurEvent);\n    });\n  }\n\n  public handleKeyup(event: KeyboardEvent) {\n    const key = event.which || event.keyCode;\n\n    if (key === 13) {\n      this.addChip();\n    }\n\n    if (key === 37) {\n      if (this.chips && this.textbox.value === '') {\n        const chip = this.chips.pop();\n\n        if (chip !== undefined) {\n          this.textbox.value = chip;\n        }\n      }\n    }\n  }\n\n  public addChip() {\n    if (this.textbox.value.length) {\n      if (!this.chips) {\n        this.chips = new Array<string>();\n      }\n\n      this.chips.push(this.textbox.value);\n      this.textbox.value = '';\n      this.chipsChanged();\n    }\n  }\n\n  public editChip(value: string) {\n    if (this.textbox.value.length === 0) {\n      this.removeChip(value);\n      this.textbox.value = value;\n      this.chipsChanged();\n    }\n  }\n\n  public removeChip(value: string) {\n    const chipIndex = this.chips.indexOf(value, 0);\n\n    if (chipIndex > -1) {\n      this.chips.splice(chipIndex, 1);\n      this.chipsChanged();\n    }\n  }\n\n  public chipsChanged() {\n    let chipValue: string | null = this.chips.join(this.separator);\n\n    if (chipValue === '') {\n      chipValue = null;\n    }\n\n    if (chipValue !== this.value) {\n      this.value = chipValue;\n    }\n  }\n\n  public valueChanged(newValue: string) {\n    if (newValue && newValue !== this.chips.join(this.separator)) {\n      this.chips = newValue.split(this.separator);\n    }\n  }\n\n  public disabledChanged(newValue: boolean | string) {\n    if (normalizeBooleanAttribute('disabled', newValue)) {\n      this.textbox.setAttribute('disabled', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    } else {\n      this.textbox.removeAttribute('disabled');\n      this.chiprepeat.setAttribute('deletable', '');\n      this.tagrepeat.setAttribute('deletable', '');\n    }\n  }\n\n  public readonlyChanged(newValue: boolean | string) {\n    if (normalizeBooleanAttribute('readonly', newValue)) {\n      this.textbox.setAttribute('readonly', '');\n      this.chiprepeat.removeAttribute('deletable');\n      this.tagrepeat.removeAttribute('deletable');\n    } else {\n      this.textbox.removeAttribute('readonly');\n      this.chiprepeat.setAttribute('deletable', '');\n      this.tagrepeat.setAttribute('deletable', '');\n    }\n  }\n\n  public themeChanged(newValue: UxChipInputTheme) {\n    if (newValue != null && newValue.themeKey == null) {\n      newValue.themeKey = 'chip-input';\n    }\n\n    this.styleEngine.applyTheme(newValue, this.element);\n  }\n}\n","import {  UxTheme } from '@aurelia-ux/core';\n\nexport class UxChipInputTheme implements UxTheme {\n  public themeKey: string = 'chip-input';\n\n  public foreground: string;\n  public bottomBorder: string;\n}\n","import { UxTheme } from '@aurelia-ux/core';\n\nexport class UxChipTheme implements UxTheme {\n  public themeKey: string = 'chip';\n\n  public background: string;\n  public foreground: string;\n\n  public deleteBackground: string;\n  public deleteForeground: string;\n}\n","/// <reference path=\"html.d.ts\" />\nimport { FrameworkConfiguration } from 'aurelia-framework';\nimport { UxChip } from './ux-chip';\nimport { UxChipInput } from './ux-chip-input';\n\nexport { UxChipInputTheme } from './ux-chip-input-theme';\nexport { UxChipTheme } from './ux-chip-theme';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources([\n    UxChipInput,\n    UxChip\n  ]);\n}\n"],"names":[],"mappings":"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"}